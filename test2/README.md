# 实验2：图书管理系统用例建模
|学号|班级|姓名|
|:-------:|:-------------: | :----------:|
|201710414208|软件(本)17-2|李云东|
## 1. 图书管理系统的用例关系图

### 1.1 用例图PlantUML源码如下：

```PlantUML
@startuml
left to right direction

:超级管理员: as Root
:图书管理员: as Admin
:读者: as Reader
Root <|-- Admin

rectangle case{
Root --> (权限管理)
Root --> (增删用户)

Admin ---> (借出图书)
Admin ---> (归还图书)
Admin ---> (维护书目)
Admin ---> (维护读者信息)

Reader --> (查询书目)
Reader --> (查询借阅情况)
Reader --> (预订图书)
Reader --> (取消预订)
}
@enduml
```


### 1.2. 用例图如下：

参见图7.6
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200330180015202.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2x5ZGRhc2h1YWlnZQ==,size_16,color_FFFFFF,t_70)

## 2. 参与者说明：

###     2.1 超级管理员

主要职责是：权限管理：授予收回权限<br/>
　　　　　　增删用户

###     2.2 图书管理员

主要职责是：借出图书<br/>
　　　　　　归还图书<br/>
　　　　　　维护书目<br/>
　　　　　　维护读者信息：密码修改，信息更新等

###     2.3 读者
    
主要职责是：预订图书<br/>
　　　　　　取消预订<br/>
　　　　　　查询书目<br/>
　　　　　　查询借阅情况

##     3. 用例规约表

###     3.1 超级管理员

####     3.1.1 “权限管理”用例

| 用例名称 | 权限管理 |
| :------ | :------ |
| 参与者 | 超级管理员 |
| 前置条件 | 超级管理员登陆 |
| 后置条件 | 用户权限更新 |
| 主事件流 | 1.超级管理员点击权限管理;<br/>2.超级管理员对图书管理员或读者进行授权或收回权限;<br/>3.超级管理员对授权进行确认保存;<br/>4.授权管理完成|

####     3.1.2 “增删用户”用例

| 用例名称 | 增删用户 |
| :------ | :------ |
| 参与者 | 超级管理员 |
| 前置条件 | 超级管理员登陆 |
| 后置条件 | 系统用户数目变动 |
| 主事件流 | 1.超级管理员点击用户管理;<br/>2.超级管理员增加(删除)一个用户;<br/>3.超级管理员对用户变动进行确认保存;<br/>4.增删用户成功 |
| 备选事件流 | 2a.若预添加(删除)用户已存在(不存在)<br/>　1.系统提示错误并进行返回 |

###     3.2 图书管理员

####     3.2.1 “借出图书”用例

| 用例名称 | 借出图书 |
| :------ | :------ |
| 参与者 | 图书管理员(主要参与者)、读者(次要参与者) |
| 前置条件 | 图书管理员成功登陆且已被授权 |
| 后置条件 | 存储借书记录,更新库存数量,所借图书状态为借出 |
| 主事件流 | 1.图书管理员将读者借书卡提供给系统;<br/>2.系统验证读者身份和借书条件;<br/>3.图书管理员将读者所借图书输入系统;<br/>4.系统记录借书信息,并修改图书的状态和此种书的可借数量;<br/>5.系统累加读者的借书数量;<br/>6.重复3~5,直到图书管理员确认全部图书登记完成;<br/>7.系统打印借书清单,交易成功完成 |
| 备选事件流 | 2a.非法读者<br/>　1.系统提示错误并拒绝接受输入<br/>2b.读者借书数已达上限<br/>　1.系统提示错误并拒绝接受输入<br/>5a.读者借书数已达上限<br/>　1.系统提示,并要求结束输入<br/>　2.图书管理员确认借书完成<br/>5b.读者有该书的预订记录<br/>　1.删除该书的预订信息 |

**“借出图书”用例流程图源码如下：**
```PlantUML
@startuml
|#AntiqueWhite|图书管理员|
|读者|
start
:提供借书卡;
if(非法读者？)then(否)
if(借阅已达上限？)then(否)
else(是)
stop
endif
else(是)
stop
endif
|图书管理员|
:将读者所借图书输入系统;
while (还没录完借阅书籍？) is (是)
:继续图书录入;
if(借阅已达上限？)then(否)
else(是)
stop
endif
if(读者有该书的预订记录？)then(是)
:删除该书的预订信息;
else(否)
endif
endwhile (否)
:借阅成功;
stop
@enduml
```

**“借出图书”用例流程图源码如下：**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200330180256258.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2x5ZGRhc2h1YWlnZQ==,size_16,color_FFFFFF,t_70)

####     3.2.2 “归还图书”用例

| 用例名称 | 归还图书 |
| :------ | :------ |
| 参与者 | 图书管理员(主要参与者)、读者(次要参与者) |
| 假设 |因为每本书是可识别的,所以还书不需要验证读者 |
| 前置条件 | 图书管理员成功登陆且已被授权 |
| 后置条件 | 修改借书记录,更新库存数量,所借图书状态为可借 |
| 主事件流 | 1.图书管理员将图书提供给系统;<br/>2.系统根据借书记录验证图书信息;<br/>3.系统提供借阅该书的读者的信息;<br/>4.系统修改借书信息,更新该图书的状态和此种书的可借数量;<br/>5.图书管理员重复步骤1,直到退出 |
| 备选事件流 | 1a.归还图书有损坏<br/>　1.图书管理员拒绝读者归还图书的请求<br/>　2.图书管理员对破损图书进行记录,并把该读者标记为非法读者<br/>　3.图书管理员告知读者处理事宜 |

####     3.2.3 “维护书目”用例

| 用例名称 | 维护书目 |
| :------ | :------ |
| 参与者 | 图书管理员 |
| 前置条件 | 图书管理员成功登陆且已被授权 |
| 后置条件 | 更新可借书目名称和数量 |
| 主事件流 | 1.图书管理员将图书提供给系统;<br/>2.系统根据ISBN号查询是否存在该种图书;<br/>3.系统更新可借书目;<br/>4.图书管理员重复步骤1~3直至退出 |
| 备选事件流 | 2a.存在ISBN号一样的图书<br/>　1.图书管理员根据新进图书数量修改该种书库存数量<br/>2b.不存在ISBN号一样的图书<br/>　1.图书管理员新增此种书,并新增库存数量 |

**“维护书目”用例流程图源码如下：**
```PlantUML
@startuml
start
:图书管理员将图书提供给系统;
while(还没录完书籍？)is(是)
:图书管理员将ISBN提供给系统;
if(存在ISBN号一样的图书)then(是)
:修改该种书库存数量;
else(否)
:员新增此种书,并新增库存数量;
endif
endwhile(否)
stop
@enduml
```

**“维护书目”用例流程图源码如下：**
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200330180357211.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2x5ZGRhc2h1YWlnZQ==,size_16,color_FFFFFF,t_70)


####     3.2.4 “维护读者信息”用例

| 用例名称 | 维护读者信息 |
| :------ | :------ |
| 参与者 | 图书管理员 |
| 前置条件 | 图书管理员成功登陆且已被授权 |
| 后置条件 | 读者信息更新 |
| 主事件流 | 1.图书管理员将读者借书卡提供给系统;<br/>2.系统对该读者密码进行初始化;<br/>3.图书管理员对读者信息进行确认保存 |

###     3.3 读者

####     3.3.1 “查询书目”用例

| 用例名称 | 查询书目 |
| :------ | :------ |
| 参与者 | 读者 |
| 假设 | 查询使用模糊查询 |
| 前置条件 | 读者成功登陆 |
| 主事件流 | 1.读者输入书名或作者;<br/>2.系统根据输入进行馆藏查询;<br/>3.系统返回所查图书的位置、库存和可借数目 |
| 备选事件流 | 3a.不存在该种书<br/>　1.询问读者是否反馈与图书馆已进行购入 |

###     3.3.2 “查询借阅情况”用例

| 用例名称 | 查询借阅情况 |
| :------ | :------ |
| 参与者 | 读者 |
| 前置条件 | 读者成功登陆 |
| 主事件流 | 1.读者点击个人信息下的借阅情况;<br/>2.系统进入读者借阅情况页面 |

####     3.3.3 “预订图书”用例

| 用例名称 | 预订图书 |
| :------ | :------ |
| 参与者 | 读者 |
| 前置条件 | 读者成功登陆 |
| 后置条件 | 更新读者借阅情况，该图书状态更新为已预订 |
| 主事件流 | 1.读者对预借书种进行馆藏查询;<br/>2.读者对预借书进行预订请求;<br/>3.系统记录请求 |

####     3.3.4 “取消预订”用例

| 用例名称 | 取消预订 |
| :------ | :------ |
| 参与者 | 读者 |
| 前置条件 | 读者成功登陆 |
| 后置条件 | 更新读者借阅情况，更改该图书状态 |
| 主事件流 | 1.读者点击个人信息下的借阅情况<br/>2.读者对预订书种进行取消预订 |
